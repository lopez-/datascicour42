setwd("c:/Users/Victor/Desktop/Quizz 3")
domestic <- read.csv("domestic.csv", colClasses="character",skip=5, header=FALSE)[,c(1,2,4,5)]
names(domestic) <- c("CountryID","Ranking","Economy","GDP")
domestic <- domestic[domestic[,2]!="",]
domestic <- domestic[domestic[,1]!="",]
domestic$GDP <- as.numeric(gsub(",","",domestic$GDP))
domestic[,2] <- as.numeric(domestic[,2])
library(dplyr)
domestic <- tbl_df(domestic)
eds <- read.csv("getdata-data-EDSTATS_Country.csv",header=TRUE)
names(eds)[1] <- "CountryID"
mrgd <- merge(domestic, eds, by="CountryID")
mrgd <- tbl_df(mrgd)
domestic <- read.csv("https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FGDP.csv", colClasses="character",skip=5, header=FALSE)[,c(1,2,4,5)]
names(domestic) <- c("CountryID","Ranking","Economy","GDP")
domestic <- domestic[domestic[,2]!="",]
domestic <- domestic[domestic[,1]!="",]
domestic$GDP <- as.numeric(gsub(",","",domestic$GDP))
domestic[,2] <- as.numeric(domestic[,2])
library(dplyr)
domestic <- tbl_df(domestic)
mean(domestic$GDP)
grep("^United",countryNames), 3
grep("^United",countryNames)
eds <- read.csv("https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FEDSTATS_Country.csv",header=TRUE)
domestic
eds <- tbl_df(eds)
eds
names(eds)[1] <- "CountryID"
eds
mrgd <- merge(domestic, eds, by="CountryID")
mrgd <- tbl_df(mrgd)
mrgd
names(mrgd)
mrgd[,10]
merged[,1:5]
mrgd[,1:5]
mrgd[,6:10]
mrgd[,11:15]
View(mrgd)
names(mrgd)
?grep
grep("End",mrgd[,13],value=TRUE)
head(mrgd[,13])
grep("Fiscal",mrgd[,13],value=TRUE)
grep("Fiscal year end: June",mrgd[,13],value=TRUE)
install.packages("quantmod")
library(quantmod)
amzn = getSymbols("AMZN",auto.assign=FALSE)
sampleTimes = index(amzn)
sampleTimes
class(sampleTimes)
length(sampleTimes)
grep("^2012",sampleTimes)
length(grep("^2012",sampleTimes))
format(sampleTimes, %a %Y)
formatDate <- format(sampleTimes, "%a %Y")
formatDate
grep("^lu. 2012",formatDate)
length(grep("^lu. 2012",formatDate))
x <- rnorm(100)
hist(x)
library(nlme)
library(lattice)
xyplot(weight ~ Time | Diet, BodyWeight)
?panel.lmline()
?par()
trellis.par.set()
?trellis.par.set()
?splom()
?print.trellis()
library(datasets)
data(airquality)
qplot(Wind,Ozone,data=airquality,facets=.~facets=.~(Month))
qplot(Wind,Ozone,data=airquality,facets=.~factor(Month))
library(ggplot2)
qplot(Wind,Ozone,data=airquality,facets=.~factor(Month))
airquality=transform(airquality,Month=factor(Month))
qplot(Wind,Ozone,data=airquality,facets=.~Month)
# set the working directory on which the datasets are stored
setwd("C:/Users/Victor/Desktop/Project 2")
# load all the libraries that will be required below
library(dplyr)
library(ggplot2)
# load the data
code <- readRDS("Source_Classification_Code.rds")
summary <- readRDS("summarySCC_PM25.rds")
# create plot 1
# 1.1 - sum all the emissions from summary and group it by year through dplyr
totals <- summary %>%
group_by(year) %>%
summarise(sum(Emissions))
# 1.2 - in order to have a clearer view on the plot, divide emissions by 1m
totals[,2] <- totals[,2]/1000000
# 1.3 - plot the graph
barplot(totals[,2],names.arg=totals[,1],space=F,col=rainbow(4),main="Emissions of PM2.4",xlab="Year",ylab="Emissions of PM2.4(millions)",las=1)
# create plot 2
# 2.1 - create a data frame "balt" from its corresponding code, fips, from summary in order to have data only for Baltimore
balt <- subset(summary,fips=="24510")
# 2.2. - similarly to 1.1 sum and group emissions by year
totals_balt <- balt %>%
group_by(year) %>%
summarise(sum(Emissions))
# 2.3 - plot the graph
barplot(totals_balt[,2],names.arg=totals_balt[,1],space=F,col=rainbow(4),main="Emissions of PM2.4",xlab="Year",ylab="Emissions of PM2.4",las=1)
# create plot 3
# 3.1 - leveraging the "balt" dataframe created on 2.1, create another, totals_type, which
# stores data for Baltimore and sum and groups by year and type
totals_type <- balt %>%
group_by(year,type) %>%
summarise(sum(Emissions))
# 3.2 - change the name of the third column so qplot doesn't prompt an error message
colnames(totals_type)[3] <- "Emissions"
# 3.3 - divide emissions by 1000 for the plot to be clearer and be expressed in thousands
totals_type[3] <- totals_type[3]/1000
# 3.4 - plot the graph
qplot(year,Emissions,data=totals_type,color=type,facets=type~.,ylab="Emissions of PM2.4 (thousands)") + geom_line()
coal.code <- grep("Coal",code$EI.Sector)
coal.code <- grep("Coal$",code$EI.Sector)
coal.code <- grep("Coal",code$EI.Sector)
str(coal.code)
?grep
coal.code <- grep("Coal",code$EI.Sector,value=TRUE)
coal.code
str(coal.code)
str(as.factor(coal.code))
summary(as.factor(coal.code))
